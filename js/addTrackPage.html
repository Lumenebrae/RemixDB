<!DOCTYPE html>
<html lang="en-US">
<div class = 'div_background_of_page'>
  <link rel="stylesheet" href="purdue_css.css">
  <div class = 'div_internal'>
    User ID (TEMP):&nbsp;
    <input
      id="field_uid"
      className="long"
      type="text"
    />
    <p class="div_page_header">Add a Song</p>
    <form id="songform" className="inputs">
      Song Title:&nbsp;
      <input
        id="field_trackname"
        className="long"
        type="text"
      />
      <br /> <br />
      Length:&nbsp;
      <input
        id="field_tracklength"
        className="long"
        type="text"
      />
      <br /> <br />
      Genre:&nbsp;
      <input
        id="field_trackgenre"
        className="long"
        type="text"
      />
      <br /> <br />
      AID list(X;Y;...):&nbsp;
      <input
        id="field_trackAIDs"
        className="long"
        type="text"
      />
      <br /> <br />
      GID list:&nbsp;
      <input
        id="field_trackGIDs"
        className="long"
        type="text"
      />
      ALID list:&nbsp;
      <input
        id="field_trackALIDs"
        className="long"
        type="text"
      />
      <br /> <br />
      TransformedID list (1,remix;2,bootleg;...):&nbsp;
      <input
        id="field_trackTransformedIDs"
        className="long"
        type="text"
      />
      <br /> <br />
      SourceID list:&nbsp;
      <input
        id="field_trackSourceIDs"
        className="long"
        type="text"
      />
    </form>
    <button onclick="addTrack()">Add Track</button>

    <p class="ArtistUploadHeader">New Artist</p>
    <form id="artistform" className="inputs">
      Artist Name:&nbsp;
      <input
        id="field_artistname"
        className="long"
        type="text"
      />
      <br /> <br />
    </form>
    <button onclick="addArtist()">Add Artist</button>

    <p class="GroupUploadHeader">New Group</p>
    <form id="groupform" className="inputs">
      Name:&nbsp;
      <input
        id="field_groupname"
        className="long"
        type="text"
      />
      <br /> <br />
      Year:&nbsp;
      <input
        id="field_groupyear"
        className="long"
        type="text"
      />
      <br /> <br />
      Type:&nbsp;
      <input
        id="field_grouptype"
        className="long"
        type="text"
      />
      <br /> <br />
      Members (1,2...):&nbsp;
      <input
        id="field_groupmembers"
        className="long"
        type="text"
      />
      <br /> <br />
    </form>
    <button onclick="addGroup()">Add Group</button>

    <p class="AlbumUploadHeader">New Album</p>
    <form id="artistform" className="inputs">
      Album Name:&nbsp;
      <input
        id="field_albumtitle"
        className="long"
        type="text"
      />
      <br /> <br />
      GID/AID(TEMP):&nbsp;
      <input
        id="field_albumcredit"
        className="long"
        type="text"
      />
      <br /> <br />
      Is this a (Group | Artist):&nbsp;
      <input
        id="field_credittype"
        className="long"
        type="text"
      />
      <br /> <br />
    </form>
    <button onclick="addAlbum()">Add Album</button>
  </div>
  <p class="meme">JavaScript makes HTML pages more dynamic and interactive.&#x263A;</p>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    var UID = []
    var AID = []
    var GID = []
    var TRID = []
    var SID = []

    function addTrack() { //Page -> PHP -> MySQL -> PHP -> Page -]
      //null safety later
      var user = document.getElementById("field_uid").value;
      var trackname = document.getElementById("field_trackname").value;
      var length = document.getElementById("field_tracklength").value;
      var genre = document.getElementById("field_trackgenre").value;
      var AID = document.getElementById("field_trackAIDs").value;
      var GID = document.getElementById("field_trackGIDs").value;
	    var ALID = document.getElementById("field_trackALIDs").value;
      var transformedID = document.getElementById("field_trackTransformedIDs").value;
      var originalID = document.getElementById("field_trackSourceIDs").value;

      //if (user && trackname){        
        var url = "http://localhost:8000/addTrack.php?q=" + trackname + "_" + length + "_" + genre + "_" + user + "_" + AID + "_" + GID + "_" + ALID + "_" + transformedID + "_" + originalID;
        console.log(url);
        //what the final query should look like
        //var url = "http://localhost:8000/addTrack.php?q=" + trackname + "_" + length + "_" + genre + "_" + AID + "_" + GID + "_" + "transformedID" + "_" + originalID + "_0";
        downloadUrl(url, function(data) {
        var xml = data.responseXML;
        console.log(xml);
        });
      //}
    }

    function addArtist() { //Page -> PHP -> MySQL -] PHP -] Page
      if (document.getElementById("field_artistname").value){
        var artistname = document.getElementById("field_artistname").value;
        var url = "http://localhost:8000/addArtist.php?q=" + artistname;
        downloadUrl(url, function(data) {
        var xml = data.responseXML;
        console.log(xml);
        });
        document.getElementById("field_trackAIDs").value += ",";
      }
      else {
        document.getElementById("field_artistname").value = "";
      }
      //var length = document.getElementById("field_tracklength").value;
      //var genre = document.getElementById("field_trackgenre").value;

    }
    
    function addGroup() { //Page -> PHP -| MySQL -] PHP -] Page
      if (document.getElementById("field_groupname").value){
        var groupname = document.getElementById("field_groupname").value;
        var groupyear = document.getElementById("field_groupyear").value;
        var grouptype = document.getElementById("field_grouptype").value;
        var members = document.getElementById("field_groupmembers")
        var url = "http://localhost:8000/addGroup.php?q=" + groupname + "_" + groupyear + "_" + grouptype + "_" + members;
        downloadUrl(url, function(data) {
        var xml = data.responseXML;
        console.log(xml);
        });
      }
    }

    function addAlbum() { //Page -] PHP -] MySQL -] PHP -] Page
      var albumtitle = document.getElementById("field_albumtitle").value;
      var length = document.getElementById("field_tracklength").value;
      var genre = document.getElementById("field_trackgenre").value;
      //will need to bunch these all up into one compound request, but for now...
    }


    function downloadUrl(url, callback) {
        var request = window.ActiveXObject ?
            new ActiveXObject('Microsoft.XMLHTTP') :
            new XMLHttpRequest;

            request.onreadystatechange = function() {
              if (request.readyState == 4) {
                request.onreadystatechange = doNothing;
                callback(request, request.status);
              }
            };

        request.open('GET', url, true);
        request.send(null);
        return 0;
    }

    function doNothing() {}


  </script>
  <!--
    <script>
    function verify(elmnt,clr) {
      elmnt.style.color = clr;
    }
    </script>
  -->
</html>
